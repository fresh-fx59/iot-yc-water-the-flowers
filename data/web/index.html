<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Watering System Control</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>💧 Smart Watering System Control</h1>
      <p>Smart Home Irrigation Management</p>
    </div>
    
    <div class="content">
      <div class="status-bar">
        <div class="status-item">
          <div class="status-indicator" id="pumpStatus"></div>
          <div class="status-text">
            <h3>Pump Status</h3>
            <p id="pumpStatusText">OFF</p>
          </div>
        </div>
        <div class="status-item">
          <div class="status-indicator" id="systemStatus"></div>
          <div class="status-text">
            <h3>System Status</h3>
            <p id="systemStatusText">Ready</p>
          </div>
        </div>
      </div>

      <div class="info-box">
        ℹ️ Select scenario and valves to water. System will check rain sensors and maintain water supply automatically.
      </div>

      <div class="scenarios">
        <!-- Scenario 1: Water Single Valve -->
        <div class="scenario-card">
          <h2>🚰 Water Single Valve</h2>
          <p>Select one valve and monitor its rain sensor. Perfect for individual plant watering.</p>
          <div class="valve-controls">
            <button class="valve-btn" onclick="selectValve(1, this)">Valve 1</button>
            <button class="valve-btn" onclick="selectValve(2, this)">Valve 2</button>
            <button class="valve-btn" onclick="selectValve(3, this)">Valve 3</button>
            <button class="valve-btn" onclick="selectValve(4, this)">Valve 4</button>
            <button class="valve-btn" onclick="selectValve(5, this)">Valve 5</button>
            <button class="valve-btn" onclick="selectValve(6, this)">Valve 6</button>
          </div>
          <div class="btn-group">
            <button class="btn btn-primary" onclick="startWateringOne()">Start Watering</button>
            <button class="btn btn-danger" onclick="stopWateringOne()">Stop</button>
          </div>
        </div>

        <!-- Scenario 2: Sequential Watering -->
        <div class="scenario-card">
          <h2>🔄 Sequential Watering</h2>
          <p>Water all valves one by one. Each valve is monitored independently with rain detection.</p>
          <div class="valve-controls" style="grid-template-columns: repeat(2, 1fr);">
            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
              <input type="checkbox" id="seq-valve-1" checked> Valve 1
            </label>
            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
              <input type="checkbox" id="seq-valve-2" checked> Valve 2
            </label>
            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
              <input type="checkbox" id="seq-valve-3" checked> Valve 3
            </label>
            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
              <input type="checkbox" id="seq-valve-4" checked> Valve 4
            </label>
            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
              <input type="checkbox" id="seq-valve-5" checked> Valve 5
            </label>
            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
              <input type="checkbox" id="seq-valve-6" checked> Valve 6
            </label>
          </div>
          <div class="btn-group">
            <button class="btn btn-primary" id="startSeqBtn" onclick="startSequentialWatering()">Start Sequence</button>
            <button class="btn btn-danger" onclick="stopSequentialWatering()">Stop</button>
          </div>
        </div>
      </div>

      <!-- Status Log -->
      <div class="status-log">
        <h3>📋 Activity Log</h3>
        <div id="statusLog">
          <div class="log-entry info">System initialized. Ready for commands.</div>
        </div>
      </div>
    </div>

    <div class="footer">
      <p>🌱 Smart Watering System v1.0.0 | ESP32-S3 DevKit | <a href="/firmware" style="color: #667eea; text-decoration: none;">Firmware Update</a></p>
    </div>
  </div>

  <script src="/js/app.js"></script>
</body>
</html>